# 3.1 Number Scales

Scales automatically generate multiple tokens from a mathematical pattern. They're perfect for creating consistent spacing, typography, and sizing systems.

## Why Use Scales?

Instead of manually defining each value:

```tokenscript
// Don't do this
spacing
  xs = 4
  sm = 8
  md = 12
  lg = 16
  xl = 20
```

Use a scale to generate them automatically:

```tokenscript
// Do this instead
spacing
  /numberScale : linear
    base = 4
    increment = 4
    steps = ["xs", "sm", "md", "lg", "xl"]
```

## Linear Scales

Linear scales add a fixed amount each step. Perfect for spacing and sizing.

### Basic Linear Scale

```tokenscript
spacing
  /numberScale : linear
    base = 8
    increment = 4
    steps = ["xs", "sm", "md", "lg", "xl"]
```

**Generated values:**
- `spacing.xs` = 8
- `spacing.sm` = 12
- `spacing.md` = 16
- `spacing.lg` = 20
- `spacing.xl` = 24

### Using Peak Instead of Increment

Define the maximum value instead:

```tokenscript
spacing
  /numberScale : linear
    base = 8
    peak = 32
    steps = ["xs", "sm", "md", "lg"]
```

**Generated values:**
- `spacing.xs` = 8
- `spacing.sm` = 14.67 (evenly distributed)
- `spacing.md` = 21.33
- `spacing.lg` = 32

### Parameters

- `base` - Starting value (required)
- `increment` - Amount to add each step
- `peak` - Maximum value (alternative to increment)
- `steps` - Array of step names or number

## Modular Scales

Modular scales multiply by a ratio each step. Perfect for typography and proportional sizing.

### Basic Modular Scale

```tokenscript
typography
  /numberScale : modular
    base = 16
    ratio = 1.25
    steps = ["sm", "md", "lg", "xl"]
```

**Generated values:**
- `typography.sm` = 16
- `typography.md` = 20 (16 × 1.25)
- `typography.lg` = 25 (20 × 1.25)
- `typography.xl` = 31.25 (25 × 1.25)

### Common Typography Ratios

```tokenscript
// Minor third (1.2) - subtle, readable
typography
  /numberScale : modular
    base = 16
    ratio = 1.2
    steps = ["sm", "md", "lg", "xl"]

// Major third (1.25) - balanced, common
typography
  /numberScale : modular
    base = 16
    ratio = 1.25
    steps = ["sm", "md", "lg", "xl"]

// Perfect fourth (1.333) - more dramatic
typography
  /numberScale : modular
    base = 16
    ratio = 1.333
    steps = ["sm", "md", "lg", "xl"]

// Golden ratio (1.618) - classic, harmonious
typography
  /numberScale : modular
    base = 16
    ratio = 1.618
    steps = ["sm", "md", "lg", "xl"]
```

### Using Peak Instead of Ratio

```tokenscript
typography
  /numberScale : modular
    base = 16
    peak = 48
    steps = ["sm", "md", "lg", "xl"]
```

The ratio is automatically calculated to reach the peak value.

### Parameters

- `base` - Starting value (required)
- `ratio` - Multiplier for each step
- `peak` - Maximum value (alternative to ratio)
- `steps` - Array of step names or number

## Step Definitions

### Array of Names

```tokenscript
steps = ["xs", "sm", "md", "lg", "xl"]
```

### Number (Auto-named)

```tokenscript
steps = 5  // Creates "1", "2", "3", "4", "5"
```

### Range Syntax

Generate step names automatically using ranges (brackets `[]` are required):

```tokenscript
// Simple range: gu01..gu10
steps = [gu01..gu10]  // Creates "gu01", "gu02", ..., "gu10"

// With custom step (odd/even or any increment)
steps = [gu00..gu20:2]  // Creates "gu00", "gu02", "gu04", ..., "gu20"
steps = [gu00..gu30:5]  // Creates "gu00", "gu05", "gu10", "gu15", "gu20", "gu25", "gu30"

// Brace sugar (equivalent)
steps = [gu{01..10}]    // Same as gu01..gu10
steps = [gu{00..20:2}]  // Same as gu00..gu20:2
steps = [gu{01..+3}]    // Count-based: gu01, gu02, gu03
steps = [gu{01..+5:2}]  // Count + step: gu01, gu03, gu05, gu07, gu09

// Inline numeric ranges (no prefix)
steps = [100..+4:100]   // 100, 200, 300, 400
```

**Note:** All range patterns must use array syntax with brackets.

**Use cases:**
- **Even numbers only:** `[gu00..gu20:2]` → `gu00, gu02, gu04, ...`
- **Odd numbers only:** `[gu01..gu21:2]` → `gu01, gu03, gu05, ...`
- **Multiples of 5:** `[gu00..gu50:5]` → `gu00, gu05, gu10, ...`

### Using Parameters in Ranges

Reference generator parameters in range step values:

```tokenscript
breakpoints
  /numberScale : linear
    base = 320
    increment = 160
    steps = [bp{320..960:increment}]  // Uses increment param
```

### Combining Multiple Ranges

You can combine multiple ranges with different stepping in a single scale:

```tokenscript
breakpoints
  /numberScale : linear
    base = 50
    peak = 900
    steps = [bp{000..150:50}, bp{200..900:100}]
```

**Result:**
- Fine-grained at lower range: `bp000, bp050, bp100, bp150` (every 50)
- Coarse-grained at higher range: `bp200, bp300, bp400, ..., bp900` (every 100)

## Inheriting Token Groups

The `/inherit()` generator clones token groups, copying their structure and values. This is useful for creating variations of existing token sets.

### Basic Inheritance

Clone values from a regular token group:

```tokenscript
yourFriends
  bob = 25
  clair = 52

myFriends
  /inherit($yourFriends)
```

### Inheriting from Scales

Clone generated scale values:

```tokenscript
gridUnit
  /numberScale : linear
    base = 8
    increment = 2
    steps = [gu{01..05}]
  /roundTo(1)

spacing
  /inherit($gridUnit)
```

### With Pipeline Transformations

Apply transformations to inherited values:

```tokenscript
fontSizes
  /numberScale : modular
    base = 16
    ratio = 1.25
    steps = [sm, md, lg]

lineHeights
  /inherit($fontSizes)
  /transform(each * 1.5)
  /roundTo(8)
```

### With Ellipsis References

Inherit from parent scopes:

```tokenscript
parent
  numbers
    one = 10
    two = 20
  
  nested
    /inherit($...numbers)
    /transform(*2)
```

### Key Features

- **Clones structure**: Preserves token names and organization
- **Copies final values**: Gets values after all pipelines are applied
- **Supports transformations**: Apply `/transform()`, `/roundTo()`, etc.
- **Works with ellipsis**: Use `$...ref` for scope traversal
- **Works with scales**: Inherits from generated scales
- **Preserves types**: Maintains the token type information

### Common Use Cases

1. **Typography scales**: Create lineHeights from fontSizes
2. **Spacing variations**: Double gridUnit values for larger spacing
3. **Token reuse**: Share base values across different contexts
4. **Responsive scales**: Create variants with different multipliers

**Notes:**
- Cannot inherit from plain arrays (only groups and scales)
- Source tokens must exist before inheritance
- Inherited tokens can be referenced like any other token

## Applying Pipelines

### Round Values

Round to nearest unit:

```tokenscript
spacing
  /numberScale : linear
    base = 7
    increment = 3
    steps = ["xs", "sm", "md"]
  /roundTo(4)
```

**Before rounding:** 7, 10, 13  
**After rounding:** 8, 12, 12

### Transform Values

Apply calculations:

```tokenscript
spacing
  /numberScale : linear
    base = 8
    increment = 4
    steps = ["xs", "sm", "md"]
  /transform(each * 1.5)
```

**Before transform:** 8, 12, 16  
**After transform:** 12, 18, 24

### Multiple Pipelines

Apply multiple transformations:

```tokenscript
spacing
  /numberScale : linear
    base = 7
    increment = 3
    steps = ["xs", "sm", "md"]
  /transform(each * 1.5)
  /roundTo(4)
```

## Complete Examples

### Spacing System

```tokenscript
// Base unit
baseUnit = 8

// Spacing scale
spacing
  /numberScale : linear
    base = $baseUnit
    increment = $baseUnit
    steps = ["xs", "sm", "md", "lg", "xl", "2xl"]
  /roundTo(1)
```

### Typography Scale

```tokenscript
// Base font size
baseFontSize = 16

// Typography scale
typography
  /numberScale : modular
    base = $baseFontSize
    ratio = 1.25
    steps = ["xs", "sm", "md", "lg", "xl", "2xl"]
  /roundTo(1)
```

### Border Radius Scale

```tokenscript
borderRadius
  /numberScale : linear
    base = 4
    increment = 4
    steps = ["sm", "md", "lg", "xl"]
```

## Choosing Between Linear and Modular

**Use Linear for:**
- Spacing systems
- Border radius
- Z-index layers
- Any evenly-spaced values

**Use Modular for:**
- Typography scales
- Icon sizes
- Any proportional relationships

## Next Steps

- Explore [Color Generators](./3.2-color-generators.md) for color scales
- Learn about [Pipelines](./4.1-pipelines.md) for advanced transformations
- See [Typography Systems](./6.1-typography-systems.md) for practical examples
